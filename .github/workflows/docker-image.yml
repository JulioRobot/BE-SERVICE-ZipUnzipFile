name: Build and Publish image to Docker Hub

on:
    [workflow_dispatch]

jobs:
  publish_images:
    runs-on: ubuntu-latest
    environment: staging
    env:
       IMG_NAME: juliorbt1/sjbeservicezipunzipfile  
    steps:
        - name: checkout
          uses: actions/checkout@v4

        - name: login docker
          run: docker login -u "${{env.USERNAME_DOCKER}}" -p "${{secrets.DOCKER_HUB_TOKEN}}"

        - name: build image
          run: docker buildx build -t ${{env.IMG_NAME}}:${{vars.VERSION_IMAGE_TAG}} .

        - name: push image to docker hub
          run: docker push ${{env.IMG_NAME}}:${{vars.VERSION_IMAGE_TAG}}
              

        
